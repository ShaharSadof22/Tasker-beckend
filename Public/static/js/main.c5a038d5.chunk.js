(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{111:function(e,t){},133:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n,s=a(1),r=a.n(s),c=a(16),o=a.n(c),i=a(28),u=a(69),l=a(12),d=a(3),p=a.n(d),m=a(22),k=a(23),f=a(29),v=a(24),h=a(30),E=a(65),T=a.n(E),b={setup:function(){n=T()("/")},terminate:function(){n=null},on:function(e,t){n.on(e,t)},off:function(e,t){n.off(e,t)},emit:function(e,t){n.emit(e,t)}};var x=a(66),w=a.n(x).a.create({withCredentials:!0}),O=function(e,t){return y(e,"GET",t)},N=function(e,t){return y(e,"POST",t)},g=function(e,t){return y(e,"PUT",t)},A=function(e,t){return y(e,"DELETE",t)};function y(e){var t,a,n,s=arguments;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:"get",a=s.length>2&&void 0!==s[2]?s[2]:null,r.prev=2,r.next=5,p.a.awrap(w({url:"".concat("/api/").concat(e),method:t,data:a}));case 5:return n=r.sent,r.abrupt("return",n.data);case 9:throw r.prev=9,r.t0=r.catch(2),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a)),console.dir(r.t0),r.t0.response&&401===r.t0.response.status&&window.location.assign("/#/login"),r.t0;case 15:case"end":return r.stop()}}),null,null,[[2,9]])}var j={query:function(){return O("task")},remove:function(e){return A("task/".concat(e))},update:function(e){return g("task",e)},create:function(e){var t={title:"",description:"",importance:"3",createdAt:new Date,lastTriedAt:null,triesCount:0,doneAt:null,success:void 0};return t.title=e,N("task",t)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="0123456789abcdefgABCDEFG",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},startTask:function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(g("task/start",e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}};var S=a(25),_=a(14),C=a(31),R=a.n(C),D=a(67),K=a.n(D),I=a(26),L=a(68),M=a(27);function P(e){var t=e.task,a=e.updateTask,n=e.removeTask,s=e.startTask,c=function(e,n){var s=Object(_.a)({},t,Object(S.a)({},e,n));a(s)};return r.a.createElement("div",{className:"task-preview flex space-between"},r.a.createElement("div",{className:"task-details"},r.a.createElement("section",{className:"flex"},r.a.createElement(I.a,{className:"icons"}),r.a.createElement(R.a,{initialValue:t.title,save:function(e){c("title",e)},inputClass:"title-input"})),r.a.createElement("h5",{className:"header-span"},r.a.createElement(L.a,{className:"icons "})," Description"),r.a.createElement("div",{className:"description-container"},r.a.createElement(R.a,{initialValue:""===t.description?"Enter description...":t.description,save:function(e){c("description",e)},inputClass:"title-input"})),r.a.createElement("div",{className:"flex"},r.a.createElement("h5",{className:"importance-label header-span"},r.a.createElement(M.b,{className:"icons"}),"Importance:"),r.a.createElement(R.a,{initialValue:t.importance,save:function(e){c("importance",e)},inputClass:"title-input"})),r.a.createElement("div",{className:"flex"},r.a.createElement("h5",{className:"header-span"},r.a.createElement(I.b,{className:"icons"}),"CreatedAt:"),r.a.createElement("h6",{className:"create-and-count"},K()(t.createdAt).format("LLLL"))),r.a.createElement("div",{className:"flex"},r.a.createElement("h5",{className:"header-span"},r.a.createElement(M.a,{className:"icons"}),"triesCount:"),r.a.createElement("h6",{className:"create-and-count"},t.triesCount))),r.a.createElement("div",{className:"flex btn-container"},void 0!==t.success&&r.a.createElement("div",{className:"".concat(t.success?"done-task":"feild-task"," task-success flex column justify-center")},r.a.createElement("p",null,t.success?"Done":"Failed")),r.a.createElement("div",{className:"flex column space-between"},r.a.createElement("button",{onClick:function(){return e=t._id,void n(e);var e},className:"remove-btn btn"},"Delete"),r.a.createElement("button",{onClick:function(){return function(e){e.success||s(e)}(t)},className:"start-btn btn"},"Start"))))}var V=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(s)))).state={text:""},a.handleChange=function(e){var t=e.target.value;a.setState({text:t})},a.onAddTask=function(){a.props.addTask(a.state.text),a.setState({text:""})},a}return Object(h.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex add-task-container"},r.a.createElement("button",{className:"add-task-btn",onClick:this.onAddTask},"Add Task"),r.a.createElement("input",{type:"text",className:"add-task-input",onChange:this.handleChange,value:this.state.text}))}}]),t}(s.Component),U=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(s)))).updateTask=function(e){a.props.updateTask(e)},a.addTask=function(e){a.props.addTask(e)},a.removeTask=function(e){a.props.removeTask(e)},a.startTask=function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(j.startTask(e));case 2:t=n.sent,a.props.updateTask(t);case 4:case"end":return n.stop()}}))},a}return Object(h.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.loadTasks(),b.setup(),b.on("send updated task",this.props.updateTaskFromSocket)}},{key:"render",value:function(){var e=this,t=this.props.tasks;return r.a.createElement("div",{className:"task-page"},r.a.createElement("h2",{className:"task-header"},"Tasks"),t.map((function(t){return r.a.createElement(P,{task:t,key:t._id,updateTask:e.updateTask,removeTask:e.removeTask,startTask:e.startTask})})),r.a.createElement(V,{addTask:this.addTask}))}}]),t}(s.Component),F={loadTasks:function(){return function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(j.query());case 3:t=a.sent,e({type:"SET_TASKS",tasks:t}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("ERROR: while loading tasks");case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},updateTask:function(e){return function(t){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"UPDATE_TASK",task:e}),a.prev=1,a.next=4,p.a.awrap(j.update(e));case 4:b.emit("connect to task",e._id),b.emit("update task",e),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log("ERROR: while update task");case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},addTask:function(e){return function(t){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(j.create(e));case 3:a=n.sent,t({type:"ADD_TASK",task:a}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("ERROR: while adding task");case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},removeTask:function(e){return function(t){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(j.remove(e));case 3:t({type:"REMOVE_TASK",taskId:e}),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("ERROR: while remove board");case 9:case"end":return a.stop()}}),null,null,[[0,6]])}},updateTaskFromSocket:function(e){return console.log("socket!!"),function(t){t({type:"UPDATE_TASK",task:e})}}},q=Object(i.b)((function(e){return{tasks:e.taskReducer.tasks}}),F)(U);var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:q,exact:!0}))))},G=(a(133),a(13)),J=a(71),X=a(72),H={tasks:[]};var z=Object(G.c)({taskReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TASKS":return Object(_.a)({},e,{tasks:t.tasks});case"REMOVE_TASK":return Object(_.a)({},e,{tasks:e.tasks.filter((function(e){return e._id!==t.taskId}))});case"UPDATE_TASK":return Object(_.a)({},e,{tasks:e.tasks.map((function(e){return e._id===t.task._id?t.task:e}))});case"ADD_TASK":return Object(_.a)({},e,{tasks:[].concat(Object(X.a)(e.tasks),[t.task])});default:return e}}}),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,W=Object(G.e)(z,Q(Object(G.a)(J.a)));o.a.render(r.a.createElement(i.a,{store:W},r.a.createElement(B,null)),document.getElementById("root"))},73:function(e,t,a){e.exports=a(134)}},[[73,1,2]]]);
//# sourceMappingURL=main.c5a038d5.chunk.js.map